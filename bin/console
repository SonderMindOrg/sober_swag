#!/usr/bin/env ruby
# frozen_string_literal: true

require 'bundler/setup'
require 'sober_swag'

# You can add fixtures and/or initialization code here to make experimenting
# with your gem easier. You can also use a different console, if you like.
module Types
  include Dry.Types()
end

Bio = SoberSwag.input_object do
  attribute :name, primitive(:String).meta(description: 'A very basic bio name')
end

Person = SoberSwag.input_object do
  attribute :name, primitive(:String).meta(description: 'The full name description')
  attribute :age, param(:Integer).constrained(gt: 0).optional.meta(description: 'My cool age')
  attribute? :mood, Types::String
end

##
# Demonstration of subclass-style.
class PersonSearch < SoberSwag::InputObject
  attribute? :name, Types::String
  attribute? :age, Types::Integer
end

##
# Demonstration of subclass-style *and* recursion in structs.
class LinkedList < SoberSwag::InputObject
  attribute :value, Types::String
  attribute? :next, LinkedList
end

# (If you use this, don't forget to add pry to your Gemfile!)
require 'pry'
Pry.start
